<?xml version="1.0" encoding="utf-8" ?>
<controls:Page 
   xmlns="http://xamarin.com/schemas/2014/forms"
   xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
   xmlns:controls="clr-namespace:ComicsShelf.Helpers.Controls"
   x:Class="ComicsShelf.Folder.FolderPage">
   <controls:Page.Content>
      <ScrollView Orientation="Vertical" VerticalOptions="FillAndExpand">
         <StackLayout VerticalOptions="StartAndExpand" HorizontalOptions="FillAndExpand" Margin="0" Padding="0">

            <StackLayout.Resources>
               <ResourceDictionary>

                  <Style TargetType="controls:ListView">
                     <Setter Property="Margin" Value="0" />
                     <Setter Property="Padding" Value="4,4,4,0" />
                     <Setter Property="HorizontalOptions" Value="FillAndExpand" />
                     <Setter Property="VerticalOptions" Value="FillAndExpand" />
                  </Style>

                  <Style TargetType="StackLayout" >
                     <Setter Property="Margin" Value="6" />
                     <Setter Property="Padding" Value="4" />
                     <Setter Property="HorizontalOptions" Value="FillAndExpand" />
                     <Setter Property="VerticalOptions" Value="Fill" />
                  </Style>

                  <Style TargetType="Image" x:Key="ImageFolder" >
                     <Setter Property="HorizontalOptions" Value="FillAndExpand" />
                     <Setter Property="VerticalOptions" Value="Start" />
                     <Setter Property="Aspect" Value="AspectFill" />
                  </Style>

                  <Style TargetType="Image" x:Key="ImageFile" >
                     <Setter Property="HorizontalOptions" Value="FillAndExpand" />
                     <Setter Property="VerticalOptions" Value="FillAndExpand" />
                     <Setter Property="Aspect" Value="AspectFit" />
                  </Style>

                  <Style TargetType="Label" x:Key="ItemTitle" >
                     <Setter Property="HorizontalOptions" Value="Center" />
                     <Setter Property="LineBreakMode" Value="TailTruncation" />
                  </Style>

               </ResourceDictionary>
            </StackLayout.Resources>

            <controls:ListView 
               IsVisible="{Binding HasRecentFiles}"
               Columns="5" ItemHeight="250"
               ItemTappedCommand="{Binding FileTappedCommand}"
               ItemsSource="{Binding Data.RecentFiles}">
               <controls:ListView.ItemTemplate>
                  <DataTemplate>

                     <StackLayout BackgroundColor="#9FA8DA">
                        <Image Source="{Binding CoverPath}"
                               Style="{StaticResource ImageFile}" 
                               HeightRequest="200" />
                        <Label Text="{Binding Text}" Style="{StaticResource ItemTitle}" />
                     </StackLayout>

                  </DataTemplate>
               </controls:ListView.ItemTemplate>
            </controls:ListView>

            <controls:ListView
               IsVisible="{Binding HasFolders}"
               Columns="3" ItemHeight="200"
               ItemTappedCommand="{Binding FolderTappedCommand}"
               ItemsSource="{Binding Data.Folders}">
               <controls:ListView.ItemTemplate>
                  <DataTemplate>
                     
                     <StackLayout BackgroundColor="#E8EAF6">
                        <Image Source="{Binding CoverPath}" 
                               Style="{StaticResource ImageFolder}" 
                               HeightRequest="150" />
                        <Label Text="{Binding Text}" Style="{StaticResource ItemTitle}" />
                     </StackLayout>

                  </DataTemplate>
               </controls:ListView.ItemTemplate>
            </controls:ListView>

            <controls:ListView
               IsVisible="{Binding HasFiles}"
               Columns="5" ItemHeight="250"
               ItemTappedCommand="{Binding FileTappedCommand}"
               ItemsSource="{Binding Data.Files}">
               <controls:ListView.ItemTemplate>
                  <DataTemplate>

                     <StackLayout BackgroundColor="#9FA8DA">
                        <Image Source="{Binding CoverPath}"
                               Style="{StaticResource ImageFile}" 
                               HeightRequest="200" />
                        <Label Text="{Binding Text}" Style="{StaticResource ItemTitle}" />
                     </StackLayout>

                  </DataTemplate>
               </controls:ListView.ItemTemplate>
            </controls:ListView>

         </StackLayout>
      </ScrollView>
   </controls:Page.Content>
</controls:Page>